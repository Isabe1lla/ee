<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Never Let Me Go - Study Organizer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #ffb6c1, #b2f7ef); 
            margin: 0;
            padding: 0;
            color: #333;
            scroll-behavior: smooth; 
        }
        header {
            background: #f06292;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        nav {
            background: #b2dfdb;
            padding: 10px;
            text-align: center;
        }
        nav a {
            margin: 0 15px;
            color: #00695c;
            text-decoration: none;
            font-weight: bold;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .content-section {
            background: #fff;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .toolbar {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .toolbar button {
            margin: 0 5px;
            padding: 10px;
            background: #8bc34a;
            border: none;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }
        .toolbar button:hover {
            background: #689f38;
        }
        .content-editable {
            border: 1px solid #ddd;
            padding: 15px;
            background-color: #f9f9f9;
            min-height: 150px;
            margin-top: 10px;
            border-radius: 5px;
        }
        footer {
            background: #ff6699;
            color: #fff;
            text-align: center;
            padding: 15px 0;
        }
        .highlight {
            background-color: yellow;
        }
        input[type="text"] {
            padding: 5px;
            margin-right: 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>Never Let Me Go by Kazuo Ishiguro - Study Organizer</h1>
</header>

<nav>
    <a href="#setting">Setting</a>
    <a href="#characters">Characters</a>
    <a href="#themes">Themes</a>
    <a href="#important-moments">Important Moments</a>
    <a href="#questions">Questions</a>
    <a href="#additional-sections">Additional Sections</a>
</nav>

<!-- Setting Section -->
<div class="content-section" id="setting">
    <h2>Setting</h2>
    <input type="text" id="searchInput-setting" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('setting')" />
    <button onclick="searchText('setting')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('setting')">Bold</button>
        <button onclick="toggleItalic('setting')">Italic</button>
        <button onclick="highlightText('setting')">Highlight</button>
        <button onclick="removeHighlight('setting')">Remove Highlight</button>
        <button onclick="changeFontSize('setting', 'increase')">A+</button>
        <button onclick="changeFontSize('setting', 'decrease')">A-</button>
        <button onclick="changeTextColor('setting')">Text Color</button>
        <input type="color" id="colorPicker-setting" onchange="updateTextColor('setting')">
    </div>

    <div class="content-editable" contenteditable="true" id="setting-content">
        <h3>Key Locations</h3>
        <p><strong>Hailsham:</strong> A secluded boarding school where Kathy, Tommy, and Ruth grow up. It is an isolated, idealized space that hides the grim reality of their existence. <span class="highlight">Example:</span> "We spent our days playing rounders on the lawn, completely unaware of what awaited us." (p. 45)</p>
        <p><strong>Explanation:</strong> Hailsham represents a space of innocence that conceals the truth. The students are protected from the truth of their purpose until later in life, and their experiences at Hailsham shape their understanding of the world.</p>
    </div>
</div>

<!-- Characters Section -->
<div class="content-section" id="characters">
    <h2>Characters</h2>
    <input type="text" id="searchInput-characters" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('characters')" />
    <button onclick="searchText('characters')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('characters')">Bold</button>
        <button onclick="toggleItalic('characters')">Italic</button>
        <button onclick="highlightText('characters')">Highlight</button>
        <button onclick="removeHighlight('characters')">Remove Highlight</button>
        <button onclick="changeFontSize('characters', 'increase')">A+</button>
        <button onclick="changeFontSize('characters', 'decrease')">A-</button>
        <button onclick="changeTextColor('characters')">Text Color</button>
        <input type="color" id="colorPicker-characters" onchange="updateTextColor('characters')">
    </div>

    <div class="content-editable" contenteditable="true" id="characters-content">
        <h3>Key Characters</h3>
        <p><strong>Kathy H. (Narrator):</strong> Empathetic and reflective, Kathy often reflects on her past experiences. She is the caretaker and one of the central figures in the story. <span class="highlight">Example:</span> "I’ve developed a kind of instinct around donors..." (p. 4)</p>

        <p><strong>Tommy:</strong> A sensitive and impulsive boy, Tommy is often mocked for his lack of creativity. He is deeply affected by his emotions and is one of the most complex characters in the novel. <span class="highlight">Example:</span> "Tommy burst into thunderous bellowing..." (p. 10)</p>
    </div>
</div>

<!-- Themes Section -->
<div class="content-section" id="themes">
    <h2>Themes</h2>
    <input type="text" id="searchInput-themes" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('themes')" />
    <button onclick="searchText('themes')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('themes')">Bold</button>
        <button onclick="toggleItalic('themes')">Italic</button>
        <button onclick="highlightText('themes')">Highlight</button>
        <button onclick="removeHighlight('themes')">Remove Highlight</button>
        <button onclick="changeFontSize('themes', 'increase')">A+</button>
        <button onclick="changeFontSize('themes', 'decrease')">A-</button>
        <button onclick="changeTextColor('themes')">Text Color</button>
        <input type="color" id="colorPicker-themes" onchange="updateTextColor('themes')">
    </div>

    <div class="content-editable" contenteditable="true" id="themes-content">
        <h3>Memory and Identity</h3>
        <p>The theme of memory and identity is critical to understanding Kathy’s reflections on her past. <span class="highlight">Example:</span> "I’ve been getting this urge to order all these old memories..." (p. 37)</p>

        <h3>Friendship</h3>
        <p>The complex and often painful relationships between Kathy, Tommy, and Ruth reflect the theme of friendship. Their bonds are defined by competition, betrayal, and love. <span class="highlight">Example:</span> "Ruth and I never really reconciled, but we knew we were friends until the end." (p. 120)</p>

        <h3>Nature vs. Nurture</h3>
        <p>The novel explores the idea that while the characters’ environments shape who they are, they cannot escape their true purpose. <span class="highlight">Example:</span> "Despite the love and care they received, they were always meant for one thing." (p. 88)</p>
    </div>
</div>

<!-- Important Moments Section -->
<div class="content-section" id="important-moments">
    <h2>Important Moments</h2>
    <input type="text" id="searchInput-important-moments" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('important-moments')" />
    <button onclick="searchText('important-moments')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('important-moments')">Bold</button>
        <button onclick="toggleItalic('important-moments')">Italic</button>
        <button onclick="highlightText('important-moments')">Highlight</button>
        <button onclick="removeHighlight('important-moments')">Remove Highlight</button>
        <button onclick="changeFontSize('important-moments', 'increase')">A+</button>
        <button onclick="changeFontSize('important-moments', 'decrease')">A-</button>
        <button onclick="changeTextColor('important-moments')">Text Color</button>
        <input type="color" id="colorPicker-important-moments" onchange="updateTextColor('important-moments')">
    </div>

    <div class="content-editable" contenteditable="true" id="important-moments-content">
        <h3>Token Exchange</h3>
        <p>The students use tokens to exchange for items they desire, a symbol of their limited control over their lives. <span class="highlight">Example:</span> "Tommy used his token to get a drawing pad, while Ruth chose a scarf." (p. 51)</p>

        <h3>Revelation of Donor Fate</h3>
        <p>Miss Lucy reveals to the students their grim fate as donors. This is a pivotal moment where they begin to understand the true nature of their existence. <span class="highlight">Example:</span> "You know what you're being raised for, don’t you?" (p. 60)</p>

        <h3>Tommy’s Bullying Incident</h3>
        <p>Tommy is repeatedly bullied for his lack of creativity. His reaction to bullying showcases his vulnerability and sensitivity. <span class="highlight">Example:</span> "Tommy burst into thunderous bellowing..." (p. 10)</p>
    </div>
</div>

<!-- Questions Section -->
<div class="content-section" id="questions">
    <h2>Questions</h2>
    <input type="text" id="searchInput-questions" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('questions')" />
    <button onclick="searchText('questions')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('questions')">Bold</button>
        <button onclick="toggleItalic('questions')">Italic</button>
        <button onclick="highlightText('questions')">Highlight</button>
        <button onclick="removeHighlight('questions')">Remove Highlight</button>
        <button onclick="changeFontSize('questions', 'increase')">A+</button>
        <button onclick="changeFontSize('questions', 'decrease')">A-</button>
        <button onclick="changeTextColor('questions')">Text Color</button>
        <input type="color" id="colorPicker-questions" onchange="updateTextColor('questions')">
    </div>

    <div class="content-editable" contenteditable="true" id="questions-content">
        <h3>Questions on Naming and Codes</h3>
        <p>Why do the characters have numbered codes (e.g., Kathy H.)? What does this represent? <span class="highlight">Example:</span> "We all have our names and codes, and yet we are just donors." (p. 150)</p>
        <p><strong>Explanation:</strong> The characters' names and codes serve as a symbol of their identity being tied to their role as donors, not as individuals with autonomous lives.</p>
    </div>
</div>

<!-- Additional Sections -->
<div class="content-section" id="additional-sections">
    <h2>Additional Sections</h2>
    <input type="text" id="searchInput-additional-sections" placeholder="Search..." onkeydown="if(event.key === 'Enter') searchText('additional-sections')" />
    <button onclick="searchText('additional-sections')">Search</button>

    <div class="toolbar">
        <button onclick="toggleBold('additional-sections')">Bold</button>
        <button onclick="toggleItalic('additional-sections')">Italic</button>
        <button onclick="highlightText('additional-sections')">Highlight</button>
        <button onclick="removeHighlight('additional-sections')">Remove Highlight</button>
        <button onclick="changeFontSize('additional-sections', 'increase')">A+</button>
        <button onclick="changeFontSize('additional-sections', 'decrease')">A-</button>
        <button onclick="changeTextColor('additional-sections')">Text Color</button>
        <input type="color" id="colorPicker-additional-sections" onchange="updateTextColor('additional-sections')">
    </div>

    <div class="content-editable" contenteditable="true" id="additional-sections-content">
        <h3>Reflection on the Endings</h3>
        <p>Discuss the final chapters and how the narrative resolves. What themes are most clearly presented at the end? <span class="highlight">Example:</span> "We were only ever supposed to be donors, and we fulfilled our purpose." (p. 290)</p>

        <p><strong>Explanation:</strong> The ending highlights the fatalistic nature of the characters’ lives and brings the themes of memory and identity full circle.</p>
    </div>
</div>

<script>
    <script>
   // Firebase 配置（从 Firebase 控制台复制）
   const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
   };

   // 初始化 Firebase
   const app = firebase.initializeApp(firebaseConfig);
   const database = firebase.database(app);
    <body>
   <h1>实时编辑内容</h1>
   <!-- 输入框 -->
   <input type="text" id="messageInput" placeholder="输入新内容">
   <button onclick="updateMessage()">保存内容</button>

   <!-- 显示区域 -->
   <p id="messageDisplay"></p>

   <script>
      // 获取 Firebase 数据库的引用
      const messageRef = database.ref('messages/message');

      // 实时监听数据变化
      messageRef.on('value', (snapshot) => {
         const data = snapshot.val();
         document.getElementById('messageDisplay').innerText = data || "没有内容";
      });

      // 保存用户输入的内容到 Firebase
      function updateMessage() {
         const message = document.getElementById('messageInput').value;
         messageRef.set(message);  // 保存内容到 Firebase
      }
   </script>
</body>
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyAA6IM_CGfc749lOpY8nMmhD0BwcyY0NnE",
  authDomain: "never-let-me-go-organizer.firebaseapp.com",
  projectId: "never-let-me-go-organizer",
  storageBucket: "never-let-me-go-organizer.firebasestorage.app",
  messagingSenderId: "464059546986",
  appId: "1:464059546986:web:2100c7ef5f3a2b071d7913"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
</script>

    // Function for bold text
    function toggleBold(section) {
        document.execCommand('bold', false, null);
    }

    // Function for italic text
    function toggleItalic(section) {
        document.execCommand('italic', false, null);
    }

    // Function to highlight text
    function highlightText(section) {
        document.execCommand('backColor', false, 'yellow');
    }

    // Function to remove highlight
    function removeHighlight(section) {
        document.execCommand('removeFormat', false, null);
    }

    // Function to change font size
    function changeFontSize(section, action) {
        const selection = window.getSelection();
        if (!selection.rangeCount) return;
        
        const range = selection.getRangeAt(0);
        const span = document.createElement('span');
        let currentSize = parseInt(window.getComputedStyle(range.startContainer.parentNode).fontSize) || 16;
        span.style.fontSize = (action === 'increase' ? currentSize + 2 : currentSize - 2) + 'px';
        range.surroundContents(span);
    }

    // Function to change text color
    function updateTextColor(section) {
        const color = document.getElementById('colorPicker-' + section).value;
        const selection = window.getSelection();
        if (!selection.rangeCount) return;

        const range = selection.getRangeAt(0);
        const span = document.createElement('span');
        span.style.color = color;
        range.surroundContents(span);
    }

    // Search and highlight function
    function searchText(section) {
        const searchInput = document.getElementById('searchInput-' + section).value;
        const regex = new RegExp(searchInput, 'gi');
        const content = document.getElementById(section + '-content').innerHTML;
        const matches = content.match(regex);
        const matchCount = matches ? matches.length : 0;

        alert('Found ' + matchCount + ' match(es)');

        document.getElementById(section + '-content').innerHTML = content.replace(regex, (match) => {
            return `<span class="highlight">${match}</span>`;
        });
    }
</script>

</body>
</html>
